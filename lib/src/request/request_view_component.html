<div class="animated fadeIn">
  <div class="row">
    <div class="col-xl-12">
      <div class="card">
        <div class="card-header">
          <i class="fa fa-files-o"></i> Первичные документы
        </div>
        <div class="card-block py-0">

          <div class="row pl-1 pr-1 d-table-row">
            <div class="col-xl-2 col-md-3 d-100vh-va-top float-xl-none pr-2 py-1" style="border-right: 1px solid #d1d4d7;" sticky-top *ngIf="!isEmpty">
              <div sticky>
                <div>
                  <div class="font-weight-bold">
                    <span class="text-uppercase mb-q">Работы</span>
                  </div>
                  <ul class="leaders font-xs mb-0">
                    <li><span>Выбрано работ</span> <span>{{model.summary.worksQuantity}}</span></li>
                    <li><span>На сумму</span><span>{{model.summary.worksAmount}} {{model.summary.currencyName}}</span>
                    </li>
                  </ul>
                  <a [cmRouterLink]="['RequestModify']" class="font-xs">Изменить</a>
                </div>
                <div class="pb-2">
                  <div class="font-weight-bold mt-2">
                    <span class="text-uppercase mb-q">Итого</span>
                  </div>
                  <ul class="leaders font-xs mb-0">
                    <li><span>Общая стоимость</span>
                      <span>{{model.summary.amount}} {{model.summary.currencyName}}</span></li>
                    <li><span>Общая стоимость с НДС</span>
                      <span>{{model.summary.amountWithVat}} {{model.summary.currencyName}}</span></li>
                    <li><span>Зачет аванса</span>
                      <span>{{model.summary.prepaidAmount}} {{model.summary.currencyName}}</span></li>
                    <li><span>Удержано резерва</span> <span>{{model.summary.reserveAmount}} {{model.summary.currencyName}}</span>
                    </li>
                    <li><span class="font-weight-bold">Итого к оплате</span> <span
                      class="font-weight-bold">{{model.summary.total}} {{model.summary.currencyName}}</span></li>
                  </ul>

                  <div class="mt-3">
                    <button type="button" class="btn btn-success btn-block mt-1" (click)="publish()"><i
                      class="icon-rocket"></i>&nbsp;
                      Отправить на согласование
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!--./col-->

            <div class="card-block" *ngIf="isEmpty">
              <h4 class="text-muted">Для формирования списка первичных документов, сначала выберите <a href="javascript:void(0)" (click)="goToRequestModify(requestId)">наряд-заказы</a></h4>
            </div>
            <div class="col-xl-10 col-md-9 d-100vh-va-top float-xl-none py-1 pl-2" *ngIf="!isEmpty">

              <grid #grid [dataSource]="worksDataSource"
                    [tableStyleClass]="'table table-condensed table-striped table-hover table-bordered'">
                <grid-column width="3%">
                  <template let-work="rowData" grid-template="body">
                    <div class="text-md-center">
                      <button class="btn btn-tiny"><i class="icon-magnifier"></i></button>
                    </div>
                  </template>
                </grid-column>

                <grid-column header="Наименование" field="name" styleClass="text-md-center"></grid-column>
                <grid-column header="ФИО" field="assignee" styleClass="text-md-center"></grid-column>
                <grid-column header="Должность" field="position" styleClass="text-md-center"></grid-column>

                <grid-column header="Сумма" field="amount" width="11%" styleClass="text-md-center">
                  <template let-work="rowData" grid-template="body">
                    <div class="text-md-right text-nowrap"><i class="fa fa-{{ work['currencyName'] }}"></i> {{
                      work['amount'] | cmFormatMoney }}
                    </div>
                  </template>
                </grid-column>
                <grid-column header="Статус" styleClass="text-md-center">
                  <template let-work="rowData" grid-template="body">
                    <div class="text-md-center"><span class="tag"
                      [ngClass]="resolveStatusStyleClass(work['statusSysName'])">{{ work['statusName'] }}</span>
                    </div>
                  </template>
                </grid-column>
              </grid>

            </div>
            <!--./col-->

          </div>
          <!--./row-->

        </div>
      </div>
    </div>
  </div>
</div>